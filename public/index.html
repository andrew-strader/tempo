<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Tempo</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- HEIC to JPEG converter -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/heic2any/0.0.4/heic2any.min.js"></script>
    
    <!-- Open Graph / Social -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tempocal.app">
    <meta property="og:title" content="Tempo - Schedule rehearsals for your show">
    <meta property="og:description" content="The easiest way to coordinate rehearsals with your band.">
    <meta property="og:image" content="https://tempocal.app/tempo-og.png">
    <meta name="twitter:card" content="summary_large_image">
    
    <link rel="stylesheet" href="/styles.css">
</head>
<body class="has-header">
    <!-- Global Header (shown when viewing a linked gig) -->
    <div class="global-header visible" id="globalHeader">
        <div class="global-header-logo" onclick="goHome()" style="cursor: pointer;"><img src="/tempo-logo.svg" alt="Tempo" class="header-logo-img"></div>
        <button class="hamburger-btn" onclick="toggleMenu()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
    </div>
    
    <!-- Menu Overlay -->
    <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>
    
    <!-- Availability Calendar Modal -->
    <div class="avail-modal-overlay" id="availModalOverlay">
        <div class="avail-modal">
            <button class="avail-modal-close" onclick="closeAvailabilityCalendar()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
            <div class="avail-modal-title">Band Availability</div>
            <div class="avail-modal-subtitle" id="availModalSubtitle">Checking calendars...</div>
            
            <div id="availLoadingState" class="avail-loading">
                <div class="avail-loading-spinner"></div>
                <div>Checking band calendars...</div>
            </div>
            
            <div id="availCalendarContent" style="display: none;">
                <div class="avail-calendar">
                    <div class="avail-cal-header">
                        <span class="avail-cal-month" id="availCalMonth">January 2025</span>
                        <div class="avail-cal-nav">
                            <button onclick="availPrevMonth()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6"/></svg></button>
                            <button onclick="availNextMonth()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,6 15,12 9,18"/></svg></button>
                        </div>
                    </div>
                    
                    <div class="avail-cal-weekdays">
                        <div class="avail-cal-weekday">S</div>
                        <div class="avail-cal-weekday">M</div>
                        <div class="avail-cal-weekday">T</div>
                        <div class="avail-cal-weekday">W</div>
                        <div class="avail-cal-weekday">T</div>
                        <div class="avail-cal-weekday">F</div>
                        <div class="avail-cal-weekday">S</div>
                    </div>
                    
                    <div class="avail-cal-days" id="availCalDays">
                        <!-- Days rendered dynamically -->
                    </div>
                    
                    <div class="avail-legend">
                        <div class="avail-legend-item">
                            <div class="avail-legend-dot all-free"></div>
                            All free
                        </div>
                        <div class="avail-legend-item">
                            <div class="avail-legend-dot some-free"></div>
                            Some free
                        </div>
                        <div class="avail-legend-item">
                            <div class="avail-legend-dot conflicts"></div>
                            Conflicts
                        </div>
                    </div>
                </div>
                
                <div class="avail-times-panel" id="availTimesPanel">
                    <div class="avail-times-header">
                        <span class="avail-times-date" id="availTimesDate">Mon, Jan 15</span>
                        <button class="avail-times-close" onclick="closeTimesPanel()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
                    </div>
                    <div id="availTimeSlots">
                        <!-- Time slots rendered dynamically -->
                    </div>
                </div>
                
                <div class="avail-selected-times" id="availSelectedTimes" style="display: none;">
                    <div class="avail-selected-header">Selected times:</div>
                    <div class="avail-selected-list" id="availSelectedList">
                        <!-- Selected chips rendered dynamically -->
                    </div>
                </div>
            </div>
            
            <div class="avail-modal-actions">
                <button class="btn btn-secondary" onclick="closeAvailabilityCalendar()">Cancel</button>
                <button class="btn" onclick="applySelectedTimes()" id="applyTimesBtn">Add Selected Times</button>
            </div>
        </div>
    </div>
    
    <!-- Slide Menu -->
    <div class="slide-menu" id="slideMenu">
        <div class="menu-header">
            <div class="menu-title">Menu</div>
            <button class="menu-close" onclick="toggleMenu()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
        </div>
        
        <div id="menuUserInfo" style="display: none;"></div>
        
        <div id="menuViewProfile" class="menu-item" style="display: none;" onclick="goToViewMyProfile()">
            <span class="menu-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg></span>
            <span class="menu-item-text">View My Profile</span>
        </div>

        <div id="menuEditProfile" class="menu-item" style="display: none;" onclick="goToEditProfile()">
            <span class="menu-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3l4 4L7 21H3v-4L17 3z"/></svg></span>
            <span class="menu-item-text">Edit Profile</span>
        </div>

        <div class="menu-divider" id="menuProfileDivider" style="display: none;"></div>

        <div class="menu-item" onclick="goToHelp()">
            <span class="menu-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9 9a3 3 0 116 0c0 2-3 3-3 3"/><circle cx="12" cy="17" r="0.5" fill="currentColor"/></svg></span>
            <span class="menu-item-text">Help</span>
        </div>

        <div class="menu-item" onclick="goToPrivacy()">
            <span class="menu-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></span>
            <span class="menu-item-text">Privacy Policy</span>
        </div>

        <div class="menu-item" onclick="goToTerms()">
            <span class="menu-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/></svg></span>
            <span class="menu-item-text">Terms of Service</span>
        </div>
        
        <div class="menu-divider"></div>
        
        <div id="menuSignIn" class="menu-item" onclick="signInFromMenu()">
            <span class="menu-item-icon">
                <svg width="18" height="18" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
            </span>
            <span class="menu-item-text">Sign in with Google</span>
        </div>
        
        <div id="menuSignOut" class="menu-item" style="display: none;" onclick="signOutFromMenu()">
            <span class="menu-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16,17 21,12 16,7"/><line x1="21" y1="12" x2="9" y2="12"/></svg></span>
            <span class="menu-item-text">Sign Out</span>
        </div>
    </div>

    <!-- "Quick heads up" Modal for existing users -->
    <div class="whats-new-overlay" id="whatsNewOverlay">
        <div class="whats-new-modal">
            <div class="whats-new-title">Quick heads up</div>
            <div class="whats-new-content">
                <!-- Content populated dynamically from UPDATE_CONFIG -->
            </div>
            <button class="btn" onclick="dismissWhatsNew()">Got it</button>
        </div>
    </div>

    <!-- Create Action Sheet -->
    <div class="create-sheet-overlay" id="createSheetOverlay" onclick="closeCreateSheet()"></div>
    <div class="create-sheet" id="createSheet">
        <div class="create-sheet-header">
            <div class="create-sheet-title">Create</div>
            <button class="create-sheet-close" onclick="closeCreateSheet()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
        </div>
        <div class="create-sheet-options">
            <div class="create-sheet-option" onclick="closeCreateSheet(); startNewGig();">
                <span class="create-sheet-option-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span>
                <div class="create-sheet-option-text">
                    <h4>New Gig</h4>
                    <p>Schedule a show with rehearsals</p>
                </div>
            </div>
            <div class="create-sheet-option" onclick="closeCreateSheet(); showCreateRehearsal();">
                <span class="create-sheet-option-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></svg></span>
                <div class="create-sheet-option-text">
                    <h4>New Rehearsal</h4>
                    <p>Schedule a practice session</p>
                </div>
            </div>
            <div class="create-sheet-option" onclick="closeCreateSheet(); showCreateBand();">
                <span class="create-sheet-option-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/><circle cx="19" cy="7" r="3"/><path d="M19 21v-1a3 3 0 00-3-3h-1"/></svg></span>
                <div class="create-sheet-option-text">
                    <h4>New Band</h4>
                    <p>Create a band and invite members</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Tab Bar -->
    <div class="bottom-tab-bar" id="bottomTabBar">
        <button class="tab-btn active" id="tabHome" onclick="switchTab('home')">
            <span class="tab-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg></span>
            <span class="tab-label">Home</span>
        </button>
        <button class="tab-btn" id="tabSchedule" onclick="switchTab('schedule')">
            <span class="tab-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span>
            <span class="tab-label">Schedule</span>
        </button>
        <button class="tab-btn" id="tabBands" onclick="switchTab('bands')">
            <span class="tab-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/><circle cx="19" cy="7" r="3"/><path d="M19 21v-1a3 3 0 00-3-3h-1"/></svg></span>
            <span class="tab-label">Bands</span>
        </button>
        <button class="tab-btn" id="tabCreate" onclick="switchTab('create')">
            <span class="tab-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></span>
            <span class="tab-label">Create</span>
        </button>
    </div>

    <div class="container has-tab-bar">
        <!-- Screen 0: Discovery Feed Home -->
        <div class="screen active" id="screen0">
            <!-- Discovery Header -->
            <div class="discovery-header">
                <div class="discovery-filters">
                    <button class="filter-pill active" data-filter="all" onclick="setDiscoveryFilter('all')">For You</button>
                    <button class="filter-pill" data-filter="available" onclick="setDiscoveryFilter('available')">Available</button>
                    <button class="filter-pill" data-filter="guitar" onclick="setDiscoveryFilter('guitar')">Guitar</button>
                    <button class="filter-pill" data-filter="drums" onclick="setDiscoveryFilter('drums')">Drums</button>
                    <button class="filter-pill" data-filter="bass" onclick="setDiscoveryFilter('bass')">Bass</button>
                    <button class="filter-pill" data-filter="keys" onclick="setDiscoveryFilter('keys')">Keys</button>
                    <button class="filter-pill" data-filter="vocals" onclick="setDiscoveryFilter('vocals')">Vocals</button>
                </div>
            </div>
            
            <!-- Discovery Feed -->
            <div class="discovery-feed" id="discoveryFeed">
                <div class="feed-loading" id="feedLoading">
                    <div class="spinner"></div>
                    <p>Loading musicians...</p>
                </div>
                <div class="feed-empty" id="feedEmpty" style="display: none;">
                    <div class="feed-empty-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/><circle cx="19" cy="7" r="3"/><path d="M19 21v-1a3 3 0 00-3-3h-1"/></svg></div>
                    <h3>No musicians yet</h3>
                    <p>Be the first to complete your profile and appear here!</p>
                    <button class="btn" onclick="goToEditProfile()">Complete Your Profile</button>
                </div>
                <div id="feedContent"></div>
            </div>
            
            <!-- Sign in prompt for non-logged-in users -->
            <div id="signInPromptHome" class="sign-in-prompt" style="display: none;">
                <button class="google-sign-in-btn-small" onclick="signInWithGoogleAndCheckProfile()">
                    <svg width="16" height="16" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                    Sign in to discover musicians
                </button>
            </div>
        </div>
        
        <!-- Legacy Screen 0: Old Home (hidden, kept for compatibility) -->
        <div class="screen" id="screenOldHome">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Schedule rehearsals for your show</p>
            
            <div id="userInfo" class="user-info" style="display: none;"></div>
            
            <div class="home-options">
                <button class="home-option-btn" onclick="startNewGig()">
                    <span class="home-option-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span>
                    <div class="home-option-text">
                        <div class="home-option-title">Create a Gig</div>
                        <div class="home-option-desc">Plan rehearsals for an upcoming show</div>
                    </div>
                </button>

                <button class="home-option-btn" id="dashboardLink" onclick="showMySchedule()">
                    <span class="home-option-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><circle cx="4" cy="6" r="1.5" fill="currentColor"/><circle cx="4" cy="12" r="1.5" fill="currentColor"/><circle cx="4" cy="18" r="1.5" fill="currentColor"/></svg></span>
                    <div class="home-option-text">
                        <div class="home-option-title">My Schedule</div>
                        <div class="home-option-desc">View all your gigs and rehearsals</div>
                    </div>
                </button>

                <button class="home-option-btn" onclick="showMyBands()">
                    <span class="home-option-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/><circle cx="19" cy="7" r="3"/><path d="M19 21v-1a3 3 0 00-3-3h-1"/></svg></span>
                    <div class="home-option-text">
                        <div class="home-option-title">My Bands</div>
                        <div class="home-option-desc">Manage your bands and members</div>
                    </div>
                </button>

                <button class="home-option-btn" onclick="showMusicianDiscovery()">
                    <span class="home-option-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></span>
                    <div class="home-option-text">
                        <div class="home-option-title">Find Musicians</div>
                        <div class="home-option-desc">Discover players for your band</div>
                    </div>
                </button>
            </div>
        </div>
        
        <!-- Screen: Profile Setup (shown after first sign-in) -->
        <div class="screen" id="screenProfileSetup">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Set up your profile</p>
            
            <div class="card">
                <h2>Profile Photo</h2>
                <div class="profile-avatar-section">
                    <div id="profileSetupAvatar" class="profile-avatar-circle"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg></div>
                    <input type="file" id="profilePhotoInput" accept="image/*" style="display:none" onchange="handleProfilePhotoSelect(event, 'setup')">
                    <button class="btn btn-secondary" style="margin-top: 12px; padding: 8px 16px; font-size: 13px;" onclick="document.getElementById('profilePhotoInput').click()">Upload Photo</button>
                </div>
            </div>
            
            <div class="card">
                <h2>About You</h2>
                
                <label>Display Name</label>
                <input type="text" id="profileName" placeholder="Your name">
                
                <label>Location</label>
                <div class="location-input-wrapper">
                    <input type="text" id="profileLocation" placeholder="e.g. Brooklyn, NY" autocomplete="off" onkeyup="filterLocations(this, 'profileLocationDropdown')" onfocus="filterLocations(this, 'profileLocationDropdown')">
                    <div class="location-dropdown" id="profileLocationDropdown"></div>
                </div>
                
                <label>Bio (optional)</label>
                <textarea id="profileBio" placeholder="Tell us about yourself and your musical background..." rows="4"></textarea>
            </div>
            
            <div class="card">
                <h2>What do you play?</h2>
                <p class="helper-text" style="margin-bottom: 16px;">Select all that apply</p>
                
                <div class="instrument-grid" id="instrumentGrid">
                    <div class="instrument-chip" data-instrument="vocals" onclick="toggleInstrument(this)">
                        Vocals
                    </div>
                    <div class="instrument-chip" data-instrument="guitar" onclick="toggleInstrument(this)">
                        Guitar
                    </div>
                    <div class="instrument-chip" data-instrument="bass" onclick="toggleInstrument(this)">
                        Bass
                    </div>
                    <div class="instrument-chip" data-instrument="drums" onclick="toggleInstrument(this)">
                        Drums
                    </div>
                    <div class="instrument-chip" data-instrument="keys" onclick="toggleInstrument(this)">
                        Keys
                    </div>
                    <div class="instrument-chip" data-instrument="saxophone" onclick="toggleInstrument(this)">
                        Sax
                    </div>
                    <div class="instrument-chip" data-instrument="trumpet" onclick="toggleInstrument(this)">
                        Trumpet
                    </div>
                    <div class="instrument-chip" data-instrument="violin" onclick="toggleInstrument(this)">
                        Strings
                    </div>
                    <div class="instrument-chip" data-instrument="other" onclick="toggleInstrumentOther(this, 'profileOtherInstrument')">
                        Other
                    </div>
                </div>
                <div id="profileOtherInstrumentWrapper" style="display: none; margin-top: 12px;">
                    <input type="text" id="profileOtherInstrument" placeholder="What instrument do you play?">
                </div>
            </div>
            
            <div class="discoverable-toggle">
                <div class="discoverable-label">
                    <div class="discoverable-title">Discoverable</div>
                    <div class="discoverable-desc">Let band leaders find you when they need musicians</div>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="profileDiscoverable" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="card">
                <div class="calendar-integration-header">
                    <span>Calendar Integration</span>
                </div>
                <p class="helper-text">Connect your Google Calendar to help band leaders find times that work for everyone.</p>
                
                <div id="setupCalendarStatus">
                    <button class="btn btn-secondary google-cal-btn" onclick="connectGoogleCalendar()" style="margin-top: 12px;">
                        <svg viewBox="0 0 24 24" width="18" height="18" style="margin-right: 8px;">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Connect Google Calendar
                    </button>
                </div>
                <p class="helper-text" style="margin-top: 8px; font-size: 11px; opacity: 0.6;">Optional - you can always do this later in Edit Profile</p>
            </div>
            
            <button class="btn btn-primary" onclick="saveProfile()" style="margin-top: 24px;">Save Profile</button>
            <button class="btn btn-secondary" onclick="skipProfileSetup()">Skip for now</button>
        </div>
        
        <!-- Screen: Edit Profile -->
        <div class="screen" id="screenEditProfile">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Edit your profile</p>
            
            <div class="card">
                <h2>Profile Photo</h2>
                <div class="profile-avatar-section">
                    <div id="editProfileAvatar" class="profile-avatar-circle"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg></div>
                    <input type="file" id="editProfilePhotoInput" accept="image/*" style="display:none" onchange="handleProfilePhotoSelect(event, 'edit')">
                    <button class="btn btn-secondary" style="margin-top: 12px; padding: 8px 16px; font-size: 13px;" onclick="document.getElementById('editProfilePhotoInput').click()">Change Photo</button>
                </div>
            </div>
            
            <div class="card">
                <h2>About You</h2>
                
                <label>Display Name</label>
                <input type="text" id="editProfileName" placeholder="Your name">
                
                <label>Location</label>
                <div class="location-input-wrapper">
                    <input type="text" id="editProfileLocation" placeholder="e.g. Brooklyn, NY" autocomplete="off" onkeyup="filterLocations(this, 'editProfileLocationDropdown')" onfocus="filterLocations(this, 'editProfileLocationDropdown')">
                    <div class="location-dropdown" id="editProfileLocationDropdown"></div>
                </div>
                
                <label>Bio (optional)</label>
                <textarea id="editProfileBio" placeholder="Tell us about yourself..." rows="4"></textarea>
            </div>
            
            <div class="card">
                <h2>What do you play?</h2>
                <p class="helper-text" style="margin-bottom: 16px;">Select all that apply</p>
                
                <div class="instrument-grid" id="editInstrumentGrid">
                    <div class="instrument-chip" data-instrument="vocals" onclick="toggleInstrument(this)">
                        Vocals
                    </div>
                    <div class="instrument-chip" data-instrument="guitar" onclick="toggleInstrument(this)">
                        Guitar
                    </div>
                    <div class="instrument-chip" data-instrument="bass" onclick="toggleInstrument(this)">
                        Bass
                    </div>
                    <div class="instrument-chip" data-instrument="drums" onclick="toggleInstrument(this)">
                        Drums
                    </div>
                    <div class="instrument-chip" data-instrument="keys" onclick="toggleInstrument(this)">
                        Keys
                    </div>
                    <div class="instrument-chip" data-instrument="saxophone" onclick="toggleInstrument(this)">
                        Sax
                    </div>
                    <div class="instrument-chip" data-instrument="trumpet" onclick="toggleInstrument(this)">
                        Trumpet
                    </div>
                    <div class="instrument-chip" data-instrument="violin" onclick="toggleInstrument(this)">
                        Strings
                    </div>
                    <div class="instrument-chip" data-instrument="other" onclick="toggleInstrumentOther(this, 'editOtherInstrument')">
                        Other
                    </div>
                </div>
                <div id="editOtherInstrumentWrapper" style="display: none; margin-top: 12px;">
                    <input type="text" id="editOtherInstrument" placeholder="What instrument do you play?">
                </div>
            </div>
            
            <div class="discoverable-toggle">
                <div class="discoverable-label">
                    <div class="discoverable-title">Discoverable</div>
                    <div class="discoverable-desc">Let band leaders find you when they need musicians</div>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="editProfileDiscoverable" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="card">
                <h2>Calendar Integration</h2>
                <p class="helper-text" style="margin-bottom: 16px;">Connect your Google Calendar to help band leaders find times that work for everyone.</p>
                
                <div id="calendarStatus">
                    <div id="calendarNotConnected">
                        <button class="btn btn-secondary" onclick="connectGoogleCalendar()" style="width: 100%;">
                            <svg width="18" height="18" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 8px;"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                            Connect Google Calendar
                        </button>
                    </div>
                    <div id="calendarConnected" style="display: none;">
                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: rgba(76, 175, 80, 0.1); border-radius: 8px; border: 1px solid rgba(76, 175, 80, 0.3);">
                            <span style="color: #4CAF50;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" style="vertical-align: -2px; margin-right: 4px;"><polyline points="20,6 9,17 4,12"/></svg>Calendar Connected</span>
                            <button class="btn-small" onclick="disconnectGoogleCalendar()" style="background: transparent; color: #e74c3c; border: 1px solid #e74c3c;">Disconnect</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>More About You</h2>
                
                <label>Genres</label>
                <p class="helper-text" style="margin-bottom: 8px;">Press Enter or comma to add tags</p>
                <div class="tags-input-wrapper" id="genreTagsWrapper">
                    <div class="tags-container" id="genreTagsContainer"></div>
                    <input type="text" id="genreTagsInput" placeholder="e.g. indie rock, jazz, funk..." onkeydown="handleTagInput(event, 'genre')">
                </div>
                
                <label style="margin-top: 20px;">Influences</label>
                <input type="text" id="editProfileInfluences" placeholder="e.g. Radiohead, D'Angelo, Khruangbin">
                
                <label>Currently working on</label>
                <input type="text" id="editProfileWorkingOn" placeholder="e.g. Recording an EP, learning jazz standards">
            </div>
            
            <div class="card">
                <h2>Links</h2>
                <p class="helper-text" style="margin-bottom: 16px;">Add your socials and music profiles</p>
                
                <div class="social-link-input">
                    <span class="social-link-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#E4405F"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                    </span>
                    <input type="text" id="editProfileInstagram" placeholder="Instagram username">
                </div>
                
                <div class="social-link-input">
                    <span class="social-link-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#1DB954"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
                    </span>
                    <input type="text" id="editProfileSpotify" placeholder="Spotify artist URL">
                </div>
                
                <div class="social-link-input">
                    <span class="social-link-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#FF0000"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                    </span>
                    <input type="text" id="editProfileYouTube" placeholder="YouTube channel URL">
                </div>
                
                <div class="social-link-input">
                    <span class="social-link-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#1DA0C3"><path d="M0 18.75l7.437-7.437L0 3.875h3.563l5.063 5.063 4.125-5.063h3.563l-7.438 7.438L16.313 18.75h-3.563l-5.063-5.063-4.125 5.063H0zm18.188-1.5v-9h2.25v9h-2.25zm0-10.5V4.5h2.25v2.25h-2.25z"/></svg>
                    </span>
                    <input type="text" id="editProfileBandcamp" placeholder="Bandcamp URL">
                </div>
                
                <div class="social-link-input">
                    <span class="social-link-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#FF5500"><path d="M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154c-.007.058.038.114.101.114h2.145c.063 0 .108-.057.101-.114l-.234-2.154c-.007-.054-.051-.1-.101-.1H1.175zm2.958 0c-.056 0-.103.046-.109.1l-.126 1.063c-.007.057.038.106.094.106h.719c.056 0 .101-.049.094-.106l-.126-1.063c-.007-.054-.053-.1-.109-.1h-.437zm.953.91c-.063 0-.107.057-.1.114l.082.907c.007.057.051.1.101.1h.687c.05 0 .094-.043.101-.1l.082-.907c.006-.057-.037-.114-.1-.114h-.853zm7.211-5.385c-.393 0-.707.32-.707.714v7.086c0 .395.314.715.707.715.393 0 .707-.32.707-.715V8.464c0-.394-.314-.714-.707-.714zm2.688 0c-.393 0-.707.32-.707.714v7.086c0 .395.314.715.707.715.393 0 .707-.32.707-.715V8.464c0-.394-.314-.714-.707-.714zm2.688 0c-.393 0-.707.32-.707.714v7.086c0 .395.314.715.707.715.393 0 .707-.32.707-.715V8.464c0-.394-.314-.714-.707-.714zM12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0z"/></svg>
                    </span>
                    <input type="text" id="editProfileSoundCloud" placeholder="SoundCloud URL">
                </div>
                
                <div class="social-link-input">
                    <span class="social-link-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#43E55E"><path d="m13.73635 5.85251 4.00467-4.11665 2.3248 2.3808-4.20064 4.00466h5.9085v3.30473h-5.9365l4.22865 4.10766-2.3248 2.3338L12.0005 12.099l-5.74052 5.76852-2.3248-2.3248 4.22864-4.10766h-5.9375V8.12132h5.9085L3.93417 4.11666l2.3248-2.3808 4.00468 4.11665V0h3.4727zm-3.4727 10.30614h3.4727V24h-3.4727z"/></svg>
                    </span>
                    <input type="text" id="editProfileLinktree" placeholder="Linktree URL">
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="updateProfile()" style="margin-top: 24px;">Save Changes</button>
            <button class="btn btn-secondary" onclick="showHomeScreen()">Cancel</button>
        </div>
        
        <!-- Screen: Musician Discovery -->
        <div class="screen" id="screenMusicianDiscovery">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Find musicians</p>
            
            <div class="card">
                <div class="search-filters">
                    <select id="filterInstrument" onchange="searchMusicians()">
                        <option value="">All Instruments</option>
                        <option value="vocals">Vocals</option>
                        <option value="guitar">Guitar</option>
                        <option value="bass">Bass</option>
                        <option value="drums">Drums</option>
                        <option value="keys">Keys</option>
                        <option value="saxophone">Saxophone</option>
                        <option value="trumpet">Trumpet</option>
                        <option value="violin">Strings</option>
                        <option value="other">Other</option>
                    </select>
                    <input type="text" id="filterLocation" placeholder="Location..." onkeyup="searchMusicians()">
                </div>
            </div>
            
            <div id="musicianResults">
                <div class="empty-state">
                    <div class="empty-state-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></div>
                    <p>Search for musicians by instrument or location</p>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="showHomeScreen()">Back</button>
        </div>
        
        <!-- Screen: Musician Profile View -->
        <div class="screen" id="screenMusicianProfile">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            
            <div class="profile-view-header">
                <img id="viewProfileAvatar" class="profile-view-avatar" src="" style="display:none;">
                <div id="viewProfileAvatarPlaceholder" class="profile-avatar-placeholder" style="width:100px;height:100px;margin:0 auto 16px;display:flex;align-items:center;justify-content:center;"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg></div>
                <div class="profile-view-name" id="viewProfileName">Loading...</div>
                <div class="profile-view-location" id="viewProfileLocation"></div>
                <div class="profile-view-instruments" id="viewProfileInstruments"></div>
                <div class="profile-view-genres" id="viewProfileGenres"></div>
            </div>
            
            <div class="card" id="viewProfileBioCard" style="display:none;">
                <h2>About</h2>
                <div class="profile-view-bio" id="viewProfileBio"></div>
            </div>
            
            <div class="card" id="viewProfileWorkingOnCard" style="display:none;">
                <h2>Currently working on</h2>
                <div class="profile-view-text" id="viewProfileWorkingOn"></div>
            </div>
            
            <div class="card" id="viewProfileInfluencesCard" style="display:none;">
                <h2>Influences</h2>
                <div class="profile-view-text" id="viewProfileInfluences"></div>
            </div>
            
            <div class="profile-social-links" id="viewProfileSocialLinks" style="display:none;">
                <!-- Social links rendered dynamically -->
            </div>
            
            <button class="contact-btn" id="contactMusicianBtn" onclick="contactMusician()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: -2px; margin-right: 6px;"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>Contact
            </button>

            <button class="btn btn-secondary" id="profileBackBtn" onclick="showMusicianDiscovery()" style="margin-top: 12px;">Back to Search</button>
        </div>
        
        <!-- Screen: Privacy Policy -->
        <div class="screen" id="screenPrivacy">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Privacy Policy</p>
            
            <div class="help-content">
                <div class="help-section">
                    <p><strong>Last updated:</strong> December 27, 2025</p>
                    
                    <h2>What Tempo Does</h2>
                    <p>Tempo is a band coordination tool that helps musicians schedule rehearsals and manage gigs. We help band leaders find times that work for everyone by checking when band members are free.</p>
                    
                    <h2>Information We Collect</h2>
                    <p><strong>Account Information:</strong> When you sign in with Google, we receive your name, email address, and profile photo to identify you within the app.</p>
                    <p><strong>Profile Information:</strong> You may optionally provide your location, bio, instruments you play, and a profile photo.</p>
                    <p><strong>Calendar Data:</strong> If you choose to connect your Google Calendar, we access your calendar's free/busy information to help find rehearsal times. We do NOT read, store, or access the details of your calendar eventsâ€”only whether time slots are free or busy.</p>
                    <p><strong>Band & Gig Data:</strong> Information about bands you create or join, gigs, rehearsal times, and your availability responses.</p>
                    
                    <h2>How We Use Your Information</h2>
                    <p>We use your information solely to provide Tempo's features:</p>
                    <ol>
                        <li>Display your profile to band members and leaders</li>
                        <li>Show your free/busy times to help schedule rehearsals</li>
                        <li>Send you notifications about gigs and rehearsals</li>
                        <li>Enable band leaders to find available musicians</li>
                    </ol>
                    
                    <h2>Google Calendar Access</h2>
                    <p>Tempo uses Google Calendar's "readonly" permission to check your availability across all your calendars. This allows us to:</p>
                    <ol>
                        <li>See which time slots you're busy (without seeing event details)</li>
                        <li>Combine availability across multiple calendars (personal, work, etc.)</li>
                        <li>Help band leaders find times when all members are free</li>
                    </ol>
                    <p><strong>We do NOT:</strong></p>
                    <ol>
                        <li>Read the titles, descriptions, or attendees of your events</li>
                        <li>Modify or create events on your calendar</li>
                        <li>Share your calendar data with third parties</li>
                        <li>Store your calendar events</li>
                    </ol>
                    <p>You can disconnect your calendar at any time from your profile settings.</p>
                    
                    <h2>Data Storage & Security</h2>
                    <p>Your data is stored securely using Google Firebase. Calendar access tokens are stored in a secure, separate collection and are only used to check availability when a band leader requests it.</p>
                    
                    <h2>Data Sharing</h2>
                    <p>We do not sell, rent, or share your personal information with third parties. Your free/busy information is only visible to leaders of bands you've joined.</p>
                    
                    <h2>Your Rights</h2>
                    <p>You can:</p>
                    <ol>
                        <li>Disconnect your Google Calendar at any time</li>
                        <li>Delete your account by contacting us</li>
                        <li>Request a copy of your data</li>
                    </ol>
                    
                    <h2>Contact</h2>
                    <p>Questions about this privacy policy? Contact us at <a href="/cdn-cgi/l/email-protection#badbc9cec8dbdedfc88b88faddd7dbd3d694d9d5d7" style="color: #4a9eff;"><span class="__cf_email__" data-cfemail="aecfdddadccfcacbdc9f9ceec9c3cfc7c280cdc1c3">[email&#160;protected]</span></a></p>
                </div>
            </div>
            
            <button class="btn btn-secondary" onclick="goBackFromPrivacy()" style="margin-top: 20px;">Back</button>
        </div>
        
        <!-- Screen: Terms of Service -->
        <div class="screen" id="screenTerms">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Terms of Service</p>
            
            <div class="help-content">
                <div class="help-section">
                    <p><strong>Last updated:</strong> December 27, 2025</p>
                    
                    <h2>Welcome to Tempo</h2>
                    <p>These Terms of Service ("Terms") govern your use of Tempo, a band coordination and rehearsal scheduling application. By using Tempo, you agree to these Terms.</p>
                    
                    <h2>What Tempo Provides</h2>
                    <p>Tempo is a free tool that helps musicians:</p>
                    <ol>
                        <li>Create and manage bands</li>
                        <li>Schedule gigs and rehearsals</li>
                        <li>Coordinate availability with band members</li>
                        <li>Find other musicians</li>
                    </ol>
                    
                    <h2>Your Account</h2>
                    <p>You sign in to Tempo using your Google account. You are responsible for maintaining the security of your account and for all activities that occur under it.</p>
                    
                    <h2>Acceptable Use</h2>
                    <p>You agree to use Tempo only for its intended purpose of band coordination. You agree not to:</p>
                    <ol>
                        <li>Use the service for any illegal purpose</li>
                        <li>Harass or spam other users</li>
                        <li>Attempt to access other users' accounts or data</li>
                        <li>Interfere with or disrupt the service</li>
                        <li>Use automated systems to access the service without permission</li>
                    </ol>
                    
                    <h2>Your Content</h2>
                    <p>You retain ownership of any content you create on Tempo (band names, gig details, profile information). By posting content, you grant Tempo permission to display it to other users as part of the service's functionality.</p>
                    
                    <h2>Calendar Access</h2>
                    <p>If you connect your Google Calendar, you authorize Tempo to access your free/busy information to help coordinate rehearsal times. You can revoke this access at any time. See our <a href="/privacy" style="color: #4a9eff;">Privacy Policy</a> for details.</p>
                    
                    <h2>Service Availability</h2>
                    <p>Tempo is provided "as is" without warranties of any kind. We strive to keep the service running smoothly, but we don't guarantee uninterrupted access. We may modify or discontinue features at any time.</p>
                    
                    <h2>Limitation of Liability</h2>
                    <p>Tempo is a free service provided for convenience. We are not liable for any damages arising from your use of the service, including missed rehearsals, scheduling conflicts, or any other issues.</p>
                    
                    <h2>Changes to Terms</h2>
                    <p>We may update these Terms from time to time. Continued use of Tempo after changes constitutes acceptance of the new Terms.</p>
                    
                    <h2>Termination</h2>
                    <p>You may stop using Tempo at any time. We reserve the right to suspend or terminate accounts that violate these Terms.</p>
                    
                    <h2>Contact</h2>
                    <p>Questions about these terms? Contact us at <a href="/cdn-cgi/l/email-protection#3554464147545150470407755258545c591b565a58" style="color: #4a9eff;"><span class="__cf_email__" data-cfemail="4a2b393e382b2e2f387b780a2d272b232664292527">[email&#160;protected]</span></a></p>
                </div>
            </div>
            
            <button class="btn btn-secondary" onclick="goBackFromTerms()" style="margin-top: 20px;">Back</button>
        </div>
        
        <!-- Screen: Help Center -->
        <div class="screen" id="screenHelp">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Help Center</p>
            
            <div class="help-content">
                <div class="help-section">
                    <h2>What is Tempo?</h2>
                    <p>Tempo helps bands coordinate rehearsals for upcoming shows. Create a gig, share it with your band, and find the best times for everyone to practice.</p>
                </div>

                <div class="help-section">
                    <h2>Managing Bands</h2>
                    <h3>Creating a Band</h3>
                    <p>Go to <strong>My Bands &rarr; Create New Band</strong>. Add your band's name, photo, and bio. Then add your bandmates by entering their names and email addresses.</p>

                    <h3>Inviting Members</h3>
                    <p>When you create a band, each member receives an email invitation. They can also join by clicking a share link you post to your group chat.</p>

                    <h3>Designating a Leader</h3>
                    <p>If you're not the band leader, you can invite someone else to lead. Select "Invite someone else as leader" when creating the band. They'll get a special invite and become the leader when they accept.</p>
                </div>

                <div class="help-section">
                    <h2>Creating Gigs</h2>
                    <h3>What's a Gig?</h3>
                    <p>A gig is an upcoming show that needs rehearsals. You enter the show details (venue, date, set time) and suggest rehearsal times for your band to vote on.</p>

                    <h3>How to Create a Gig</h3>
                    <ol>
                        <li>Tap <strong>Create a Gig</strong> from the home screen</li>
                        <li>Select your band (optional but recommended)</li>
                        <li>Enter the show details</li>
                        <li>Add possible rehearsal times</li>
                        <li>Share the link with your band</li>
                    </ol>

                    <h3>Band Notifications</h3>
                    <p>If you select a band when creating a gig, all band members are automatically notified via email. They can click the link to submit their availability.</p>
                </div>

                <div class="help-section">
                    <h2>Rehearsal Scheduling</h2>
                    <h3>Submitting Availability</h3>
                    <p>When you receive a gig link, tap each rehearsal time slot to mark yourself as available or unavailable. Submit when done.</p>

                    <h3>Confirming Rehearsals</h3>
                    <p>Band leaders can see everyone's availability on the dashboard. Once everyone has responded, confirm the times that work best. All band members will be notified of the confirmed rehearsals.</p>
                </div>

                <div class="help-section">
                    <h2>Finding Musicians</h2>
                    <p>Looking for players? Use <strong>Find Musicians</strong> to discover other musicians on Tempo. Filter by location and instrument to find the perfect fit for your band.</p>
                </div>

                <div class="help-section">
                    <h2>Your Profile</h2>
                    <p>Set up your profile to be discoverable by other musicians. Add your photo, instruments you play, location, and a bio. Access your profile from the menu.</p>
                </div>

                <div class="help-section">
                    <h2>Need More Help?</h2>
                    <p>Have questions or feedback? Email us at <a href="/cdn-cgi/l/email-protection#2445575056454041561516644349454d480a474b49" style="color: #4a90e2;"><span class="__cf_email__" data-cfemail="eb8a989f998a8f8e99dad9ab8c868a8287c5888486">[email&#160;protected]</span></a></p>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="showHomeScreen()" style="margin-top: 20px;">Back to Home</button>
        </div>
        
        <!-- Screen: My Bands -->
        <div class="screen" id="screenMyBands">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Your bands</p>
            
            <button class="btn" onclick="showCreateBand()" style="margin-bottom: 20px;">+ Create New Band</button>
            
            <div id="myBandsList">
                <div class="empty-state">
                    <div class="empty-state-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/><circle cx="19" cy="7" r="3"/><path d="M19 21v-1a3 3 0 00-3-3h-1"/></svg></div>
                    <p>Loading bands...</p>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="showHomeScreen()" style="margin-top: 20px;">Back to Home</button>
        </div>
        
        <!-- Screen: Create Band -->
        <div class="screen" id="screenCreateBand">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Create a new band</p>
            
            <div class="card">
                <h2>Band Info</h2>
                
                <div class="band-photo-section">
                    <div id="bandPhotoPreview" class="band-photo-circle"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/><circle cx="19" cy="7" r="3"/><path d="M19 21v-1a3 3 0 00-3-3h-1"/></svg></div>
                    <input type="file" id="bandPhotoInput" accept="image/*" style="display:none" onchange="handleBandPhotoSelect(event)">
                    <button class="btn btn-secondary" style="margin-top: 12px; padding: 8px 16px; font-size: 13px;" onclick="document.getElementById('bandPhotoInput').click()">Upload Band Photo</button>
                </div>
                
                <label>Band Name</label>
                <input type="text" id="newBandName" placeholder="e.g. The Straders">
                
                <label>Bio</label>
                <textarea id="newBandBio" placeholder="Tell us about your band..." rows="3"></textarea>
            </div>
            
            <div class="card">
                <h2>Band Leader</h2>
                
                <div class="leader-toggle">
                    <label class="radio-option">
                        <input type="radio" name="leaderType" value="self" checked onchange="toggleLeaderInput()">
                        <span>I'm the band leader</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="leaderType" value="other" onchange="toggleLeaderInput()">
                        <span>Invite someone else as leader</span>
                    </label>
                </div>
                
                <div id="inviteLeaderFields" style="display: none; margin-top: 16px;">
                    <p style="color: #888; font-size: 13px; margin-bottom: 12px;">They'll receive an invite to lead the band. You'll manage it until they accept.</p>
                    <div class="member-input-row">
                        <input type="text" id="inviteLeaderName" class="member-name-input" placeholder="Leader's Name">
                        <input type="email" id="inviteLeaderEmail" class="member-email-input" placeholder="Leader's Email">
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>Add Members</h2>
                <p style="color: #888; font-size: 13px; margin-bottom: 16px;">Members will receive an email invite to join.</p>
                
                <div id="bandMemberInputs">
                    <div class="member-input-row">
                        <input type="text" class="member-name-input" placeholder="Name">
                        <input type="email" class="member-email-input" placeholder="Email">
                    </div>
                    <div class="member-input-row">
                        <input type="text" class="member-name-input" placeholder="Name">
                        <input type="email" class="member-email-input" placeholder="Email">
                    </div>
                    <div class="member-input-row">
                        <input type="text" class="member-name-input" placeholder="Name">
                        <input type="email" class="member-email-input" placeholder="Email">
                    </div>
                </div>
                
                <button class="btn btn-secondary" onclick="addMemberInputRow()" style="margin-top: 12px; padding: 8px 16px; font-size: 13px;">+ Add Another Member</button>
            </div>
            
            <button class="btn" onclick="saveBand()">Create Band</button>
            <button class="btn btn-secondary" onclick="showMyBands()" style="margin-top: 12px;">Cancel</button>
        </div>

        <!-- Screen: Create Rehearsal -->
        <div class="screen" id="screenCreateRehearsal">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Schedule a rehearsal</p>

            <div class="card">
                <h2>Rehearsal Details</h2>

                <label>Name <span style="color:#555;font-weight:normal;">(optional)</span></label>
                <input type="text" id="rehearsalName" placeholder="e.g., Tuesday Jam, Album Prep">

                <label>Date <span style="color:#e74c3c;">*</span></label>
                <input type="date" id="rehearsalDate" required min="2024-01-01" max="2099-12-31">

                <div class="row">
                    <div>
                        <label>Start Time <span style="color:#e74c3c;">*</span></label>
                        <input type="time" id="rehearsalStartTime" required>
                    </div>
                    <div>
                        <label>End Time <span style="color:#555;font-weight:normal;">(optional)</span></label>
                        <input type="time" id="rehearsalEndTime">
                    </div>
                </div>

                <label>Location <span style="color:#555;font-weight:normal;">(optional)</span></label>
                <input type="text" id="rehearsalLocationInput" placeholder="Address or location name">
            </div>

            <div class="card">
                <h2>Who's Invited?</h2>

                <div class="invite-mode-toggle">
                    <button class="invite-mode-btn active" id="inviteBandBtn" onclick="setInviteMode('band')">Invite a Band</button>
                    <button class="invite-mode-btn" id="inviteIndividualBtn" onclick="setInviteMode('individual')">Invite Musicians</button>
                </div>

                <!-- Band mode -->
                <div id="inviteBandMode">
                    <label>Select Band</label>
                    <select id="rehearsalBandSelect" onchange="onRehearsalBandSelected()">
                        <option value="">-- Select a band --</option>
                    </select>

                    <div id="rehearsalSuggestTimesSection" style="display: none; margin-top: 16px;">
                        <button class="btn btn-secondary" onclick="openRehearsalAvailabilityCalendar()" style="width: 100%;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: -2px; margin-right: 4px;"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                            Check Band Calendars
                        </button>
                        <p class="helper-text" id="rehearsalSuggestTimesHelper" style="text-align: center; margin: 8px 0 0;"></p>
                    </div>

                    <div id="linkedGigSection" style="display: none; margin-top: 16px;">
                        <label>Link to Gig <span style="color:#555;font-weight:normal;">(optional)</span></label>
                        <select id="rehearsalLinkedGig">
                            <option value="">-- No linked gig --</option>
                        </select>
                        <p class="helper-text">Link this rehearsal to an upcoming gig</p>
                    </div>
                </div>

                <!-- Individual mode -->
                <div id="inviteIndividualMode" style="display: none;">
                    <label>Add by Email</label>
                    <div class="add-email-row">
                        <input type="email" id="rehearsalInviteEmail" placeholder="email@example.com">
                        <button class="add-email-btn" onclick="addRehearsalInvitee()">Add</button>
                    </div>
                    <div id="rehearsalInviteesList" class="invitees-list"></div>
                </div>
            </div>

            <div class="card">
                <label class="checkbox-row">
                    <input type="checkbox" id="rehearsalRecurring" onchange="toggleRecurring()">
                    <span>Make this a recurring rehearsal</span>
                </label>

                <div id="recurringOptions" style="display: none; margin-top: 16px;">
                    <label>Frequency</label>
                    <select id="rehearsalFrequency">
                        <option value="weekly">Weekly</option>
                        <option value="biweekly">Every 2 weeks</option>
                        <option value="monthly">Monthly</option>
                    </select>

                    <label style="margin-top: 12px;">End Date</label>
                    <input type="date" id="rehearsalRecurringEnd" min="2024-01-01" max="2099-12-31">
                    <p class="helper-text">Rehearsals will repeat until this date</p>
                </div>
            </div>

            <div class="card">
                <label>Notes <span style="color:#555;font-weight:normal;">(optional)</span></label>
                <textarea id="rehearsalNotes" placeholder="What to work on, what to bring, etc."></textarea>
            </div>

            <details class="collapsible-section">
                <summary>Setlist</summary>
                <div class="details-content">
                    <p class="helper-text">Add songs to practice</p>
                    <div id="rehearsalSetlistItems"></div>
                    <div class="add-song-row">
                        <input type="text" id="rehearsalNewSongTitle" placeholder="Song title">
                        <input type="text" id="rehearsalNewSongDuration" placeholder="3:45" class="duration-input">
                        <button class="add-song-btn" onclick="addRehearsalSong()">+</button>
                    </div>
                </div>
            </details>

            <details class="collapsible-section">
                <summary>Practice Playlist</summary>
                <div class="details-content">
                    <label>Playlist URL <span style="color:#555;font-weight:normal;">(Spotify, YouTube, etc.)</span></label>
                    <input type="url" id="rehearsalPlaylistUrl" placeholder="https://open.spotify.com/playlist/...">
                </div>
            </details>

            <details class="collapsible-section">
                <summary>Files</summary>
                <div class="details-content">
                    <p class="helper-text">Charts, audio files, PDFs</p>
                    <div id="rehearsalUploadedFiles"></div>
                    <div class="file-upload-area" onclick="document.getElementById('rehearsalFileInput').click()">
                        <div class="upload-text">Tap to upload files</div>
                        <div class="upload-subtext">PDFs, audio files, documents</div>
                    </div>
                    <input type="file" id="rehearsalFileInput" multiple accept="audio/*,.pdf,.doc,.docx" style="display:none" onchange="handleRehearsalFileSelect(event)">
                </div>
            </details>

            <button class="btn btn-primary" onclick="createRehearsal()" style="margin-top: 24px;">Create Rehearsal</button>
            <button class="btn btn-secondary" onclick="showMySchedule()">Cancel</button>
        </div>

        <!-- Screen: Rehearsal Detail -->
        <div class="screen" id="screenRehearsalDetail">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>

            <div class="rehearsal-detail-header">
                <div class="rehearsal-type-badge">Rehearsal</div>
                <h1 id="rehearsalDetailName">Rehearsal</h1>
                <div id="rehearsalDetailBand" class="rehearsal-detail-band"></div>
            </div>

            <div class="card">
                <div class="rehearsal-detail-row">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                    <span id="rehearsalDetailDate">Loading...</span>
                </div>
                <div class="rehearsal-detail-row">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></svg>
                    <span id="rehearsalDetailTime">Loading...</span>
                </div>
                <div class="rehearsal-detail-row" id="rehearsalDetailLocationRow" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
                    <span id="rehearsalDetailLocation"></span>
                </div>
                <div class="rehearsal-detail-row" id="rehearsalDetailLinkedGigRow" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                    <span>For: <a href="#" id="rehearsalDetailLinkedGig" onclick="viewLinkedGig(event)">Gig</a></span>
                </div>
            </div>

            <!-- RSVP Section (for non-organizers) -->
            <div class="card" id="rehearsalRsvpSection" style="display: none;">
                <h2>Your Response</h2>
                <div class="rsvp-buttons">
                    <button class="rsvp-btn" data-response="yes" onclick="rsvpRehearsal('yes')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20,6 9,17 4,12"/></svg>
                        Going
                    </button>
                    <button class="rsvp-btn" data-response="maybe" onclick="rsvpRehearsal('maybe')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><circle cx="12" cy="16" r="0.5" fill="currentColor"/></svg>
                        Maybe
                    </button>
                    <button class="rsvp-btn" data-response="no" onclick="rsvpRehearsal('no')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                        Can't make it
                    </button>
                </div>
            </div>

            <!-- Responses Section -->
            <div class="card" id="rehearsalResponsesSection" style="display: none;">
                <h2>Responses</h2>
                <div id="rehearsalResponsesList"></div>
            </div>

            <!-- Notes Section -->
            <div class="card" id="rehearsalNotesSection" style="display: none;">
                <h2>Notes</h2>
                <div id="rehearsalDetailNotes" class="notes-content"></div>
            </div>

            <!-- Setlist Section -->
            <div class="card" id="rehearsalSetlistSection" style="display: none;">
                <h2>Setlist</h2>
                <div id="rehearsalDetailSetlist"></div>
            </div>

            <!-- Playlist Section -->
            <div class="card" id="rehearsalPlaylistSection" style="display: none;">
                <h2>Practice Playlist</h2>
                <a href="#" id="rehearsalDetailPlaylist" target="_blank" class="playlist-link">Open Playlist</a>
            </div>

            <!-- Files Section -->
            <div class="card" id="rehearsalFilesSection" style="display: none;">
                <h2>Files</h2>
                <div id="rehearsalDetailFiles"></div>
            </div>

            <button class="btn btn-secondary" onclick="showMySchedule()" style="margin-top: 20px;">Back to Schedule</button>
        </div>

        <!-- Screen: Band Detail -->
        <div class="screen" id="screenBandDetail">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            
            <div class="band-header">
                <div id="bandDetailPhoto" class="band-detail-photo"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/><circle cx="19" cy="7" r="3"/><path d="M19 21v-1a3 3 0 00-3-3h-1"/></svg></div>
                <h1 id="bandDetailName">Band Name</h1>
                <span class="band-role-badge" id="bandDetailRole">Leader</span>
            </div>
            
            <div class="card" id="bandShareCard">
                <h2>Invite Link</h2>
                <p style="color: #888; font-size: 13px; margin-bottom: 12px;">Share this link to your group chat</p>
                <div class="share-url-box">
                    <span id="bandShareUrl" class="share-url-text">Loading...</span>
                </div>
                <div class="share-buttons">
                    <button class="btn btn-secondary" onclick="copyBandLink()" id="copyBandBtn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: -2px; margin-right: 4px;"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>Copy Link</button>
                    <button class="btn" onclick="shareBandToMessages()"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: -2px; margin-right: 4px;"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>Share</button>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>Members</h2>
                    <button class="btn-small" id="addMemberBtn" onclick="showAddMemberModal()">+ Add</button>
                </div>
                <div id="bandMembersDisplay"></div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>Band Gigs</h2>
                </div>
                <div id="bandGigsList">
                    <p style="color: #666; font-size: 14px;">No gigs yet</p>
                </div>
            </div>
            
            <button id="createGigForBandBtn" class="btn" onclick="createGigForBand()" style="display: none;">+ Create Gig for this Band</button>
            <button class="btn btn-secondary" onclick="showMyBands()" style="margin-top: 12px;">Back to My Bands</button>
        </div>
        
        <!-- Screen: Band Invite Landing -->
        <div class="screen" id="screenBandInvite">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            
            <div class="band-invite-card">
                <div id="inviteBandPhoto" class="band-invite-photo"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/><circle cx="19" cy="7" r="3"/><path d="M19 21v-1a3 3 0 00-3-3h-1"/></svg></div>
                <h1 id="inviteBandName">Band Name</h1>
                <p id="inviteBandBio" class="band-invite-bio"></p>
                <p class="band-invite-text">You've been invited to join this band on Tempo</p>
                
                <button class="btn" onclick="handleBandInviteJoin()" id="joinBandBtn">
                    Join Band
                </button>
                
                <p style="color: #666; font-size: 13px; margin-top: 16px;">
                    You'll be notified about upcoming gigs and can submit your availability for rehearsals.
                </p>
            </div>
        </div>
        
        <!-- Screen 1: Show Details -->
        <div class="screen" id="screen1">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Schedule rehearsals for your show</p>
            
            <!-- Demo button for testing -->
            <button class="demo-btn" onclick="fillDemoData()">ðŸ§ª Fill Demo Data</button>
            
            <div class="card">
                <div class="card-header">
                    <h2>Show Details</h2>
                    <span class="step-badge">Step 1 of 2</span>
                </div>
                
                <label>Select Band</label>
                <select id="gigBandSelect" onchange="onBandSelected()">
                    <option value="">-- Select a band (optional) --</option>
                </select>
                <p style="color: #666; font-size: 12px; margin: 4px 0 16px;">Band members will be automatically notified</p>
                
                <label>Band Name</label>
                <input type="text" id="bandName" placeholder="Your band name">
                
                <label>Venue</label>
                <input type="text" id="venue" placeholder="Where's the show?">
                
                <label>Show Date</label>
                <input type="date" id="showDate" min="2024-01-01" max="2099-12-31">
                
                <div class="row">
                    <div>
                        <label>Load-in</label>
                        <input type="time" id="loadIn">
                    </div>
                    <div>
                        <label>Set Time</label>
                        <input type="time" id="setTime">
                    </div>
                </div>
                
                <label>Set Length</label>
                <select id="setLength">
                    <option value="30">30 minutes</option>
                    <option value="45" selected>45 minutes</option>
                    <option value="60">60 minutes</option>
                    <option value="90">90 minutes</option>
                    <option value="120">2+ hours</option>
                </select>
                
                <label>Notes</label>
                <textarea id="notes" placeholder="Additional details for the band..."></textarea>
                
                <button class="btn btn-primary" onclick="goToScreen2()">Continue</button>
            </div>
        </div>
        
        <!-- Screen 2: Rehearsal Times -->
        <div class="screen" id="screen2">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline" id="screen2Subtitle">Schedule rehearsals</p>
            
            <div class="card">
                <div class="card-header">
                    <h2>Rehearsal Times</h2>
                    <span class="step-badge">Step 2 of 3</span>
                </div>
                
                <label>Rehearsal Location <span style="color:#555;font-weight:normal;">(optional)</span></label>
                <input type="text" id="rehearsalLocation" placeholder="Address or location name">
                <p class="helper-text" style="margin-top: -10px;">Where will rehearsals be held?</p>
                
                <label>How Many Rehearsals?</label>
                <select id="rehearsalCount">
                    <option value="1">1 rehearsal</option>
                    <option value="2" selected>2 rehearsals</option>
                    <option value="3">3 rehearsals</option>
                    <option value="4">4 rehearsals</option>
                </select>
                
                <label>How Many Band Members?</label>
                <select id="bandMemberCount">
                    <option value="1">1 member</option>
                    <option value="2">2 members</option>
                    <option value="3" selected>3 members</option>
                    <option value="4">4 members</option>
                    <option value="5">5 members</option>
                    <option value="6">6+ members</option>
                </select>
                <p class="helper-text" style="margin-top: -10px;">Not including you. You'll be notified when everyone responds.</p>
                
                <label style="margin-top: 20px;">Suggested Times</label>
                <p class="helper-text" style="margin-top: 0; margin-bottom: 16px;">Add times that might work. Your band will vote.</p>
                
                <div id="suggestTimesSection" style="display: none; margin-bottom: 20px;">
                    <button class="btn btn-secondary" onclick="openAvailabilityCalendar()" id="suggestTimesBtn" style="width: 100%;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: -2px; margin-right: 4px;"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Check Band Calendars
                    </button>
                    <p class="helper-text" id="suggestTimesHelper" style="text-align: center; margin: 8px 0 0;"></p>
                </div>
                
                <div id="rehearsalSlots">
                    <div class="rehearsal-slot" data-slot="1">
                        <div class="rehearsal-slot-header">
                            <span class="rehearsal-number">Option 1</span>
                            <span class="remove-rehearsal" onclick="removeSlot(this)">Remove</span>
                        </div>
                        <div class="row">
                            <input type="date" class="slot-date" min="2024-01-01" max="2099-12-31">
                            <input type="time" class="slot-time">
                        </div>
                    </div>
                    <div class="rehearsal-slot" data-slot="2">
                        <div class="rehearsal-slot-header">
                            <span class="rehearsal-number">Option 2</span>
                            <span class="remove-rehearsal" onclick="removeSlot(this)">Remove</span>
                        </div>
                        <div class="row">
                            <input type="date" class="slot-date" min="2024-01-01" max="2099-12-31">
                            <input type="time" class="slot-time">
                        </div>
                    </div>
                </div>
                
                <button class="add-btn" onclick="addSlot()">+ Add time</button>
                
                <div id="statusMessage"></div>
                
                <button class="btn btn-primary" onclick="goToScreen2b()">Continue</button>
                <button class="btn btn-secondary" onclick="goToScreen1()">Back</button>
            </div>
        </div>
        
        <!-- Screen 2b: Materials & Setlist -->
        <div class="screen" id="screen2b">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline" id="screen2bSubtitle">Add practice materials</p>
            
            <div class="card">
                <div class="card-header">
                    <h2>Setlist</h2>
                    <span class="step-badge">Step 3 of 3</span>
                </div>
                
                <p class="helper-text" style="margin-bottom: 16px;">Add songs for the set. You can skip this and add later.</p>
                
                <div id="setlistItems">
                    <!-- Songs added dynamically -->
                </div>
                
                <div class="add-song-row">
                    <input type="text" id="newSongTitle" placeholder="Song title">
                    <input type="text" id="newSongDuration" placeholder="3:45" class="duration-input">
                    <button class="add-song-btn" onclick="addSong()">+</button>
                </div>
            </div>
            
            <div class="card">
                <h2>Practice Playlist</h2>
                
                <label>Streaming Link</label>
                <input type="text" id="streamingLink" placeholder="https://open.spotify.com/playlist/...">
                <p class="helper-text" style="margin-top: -10px;">Spotify, Apple Music, or SoundCloud playlist URL</p>
            </div>
            
            <div class="card">
                <h2>Show Graphic</h2>
                <p class="helper-text" style="margin-top: 0; margin-bottom: 16px;">Upload a flyer or poster for the show</p>
                
                <div id="showGraphicPreview" style="display:none; margin-bottom: 16px; text-align: center;">
                    <img id="showGraphicImg" style="max-width: 200px; border-radius: 8px;">
                    <div style="margin-top: 8px;">
                        <span class="remove-graphic" onclick="removeShowGraphic()" style="color: #666; cursor: pointer; font-size: 13px;">Remove</span>
                    </div>
                </div>
                
                <div class="file-upload-area" id="showGraphicUpload" onclick="document.getElementById('showGraphicInput').click()">
                    <div class="upload-icon">ðŸ–¼</div>
                    <div class="upload-text">Tap to upload show graphic</div>
                    <div class="upload-subtext">JPG, PNG, or GIF</div>
                </div>
                <input type="file" id="showGraphicInput" accept="image/*" style="display:none" onchange="handleShowGraphicSelect(event)">
            </div>
            
            <div class="card">
                <h2>Other Files</h2>
                <p class="helper-text" style="margin-top: 0; margin-bottom: 16px;">Stage plots, charts, audio files, etc.</p>
                
                <div id="uploadedFiles">
                    <!-- Uploaded files shown here -->
                </div>
                
                <div class="file-upload-area" onclick="document.getElementById('fileInput').click()">
                    <div class="upload-icon">ðŸ“</div>
                    <div class="upload-text">Tap to upload files</div>
                    <div class="upload-subtext">PDFs, audio files, documents</div>
                </div>
                <input type="file" id="fileInput" multiple accept="audio/*,.pdf,.doc,.docx" style="display:none" onchange="handleFileSelect(event)">
            </div>
            
            <div class="skip-note">
                ðŸ’¡ You can skip this and add materials later from your dashboard
            </div>
            
            <button class="btn btn-primary" id="createBtn" onclick="createGig()">Create Gig</button>
            <button class="btn btn-secondary" onclick="goBackToScreen2()">Back</button>
        </div>
        
        <!-- Screen 3: Success -->
        <div class="screen" id="screen3">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            
            <div class="card success-card">
                <div class="success-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20,6 9,17 4,12"/></svg></div>
                <h1 class="success-title">You're set!</h1>
                <p class="success-subtitle">Share this link with your band</p>
                
                <div class="share-link">
                    <code id="shareUrl">Loading...</code>
                    <button class="copy-btn" id="copyBtn" onclick="copyLink()">Copy</button>
                </div>
                
                <button class="btn btn-primary" onclick="shareToMessages()">Share via Messages</button>
            </div>
            
            <!-- Sign-in prompt for non-logged-in users -->
            <div id="signInPromptScreen3" class="sign-in-card">
                <p>Sign in to get notified when your band responds</p>
                <button class="google-sign-in-btn-small" onclick="signInAndSaveGig()">
                    <svg width="16" height="16" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                    Sign in with Google
                </button>
            </div>
            
            <button class="btn btn-secondary" onclick="viewDashboard()">View Responses</button>
            <button class="btn btn-secondary" onclick="startOver()">Create another gig</button>
        </div>
        
        <!-- Screen: My Schedule Dashboard -->
        <div class="screen" id="screenMySchedule">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Your gigs and rehearsals</p>

            <div id="userInfoMySchedule" class="user-info" style="display: none;"></div>

            <div class="card">
                <div class="card-header" style="margin-bottom: 16px;">
                    <h2>My Schedule</h2>
                </div>
                <div class="schedule-filters">
                    <button class="schedule-filter-btn active" data-filter="all" onclick="filterSchedule('all')">All</button>
                    <button class="schedule-filter-btn" data-filter="gigs" onclick="filterSchedule('gigs')">Gigs</button>
                    <button class="schedule-filter-btn" data-filter="rehearsals" onclick="filterSchedule('rehearsals')">Rehearsals</button>
                </div>
                <div id="myScheduleList" class="my-schedule-list">
                    <div class="empty-state">
                        <div class="empty-state-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
                        <p>Loading your schedule...</p>
                    </div>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="showHomeScreen()">Back</button>
        </div>
        
        <!-- Screen 6: Leader Dashboard -->
        <div class="screen" id="screen6">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            
            <div class="dashboard-header">
                <div class="dashboard-band" id="dashBand">Loading...</div>
                <div class="dashboard-venue" id="dashVenue"></div>
                <div class="dashboard-date" id="dashDate"></div>
            </div>
            
            <div class="share-bar">
                <code id="dashShareUrl">bandcal.app/...</code>
                <button class="copy-btn" onclick="copyDashLink()">Copy Link</button>
            </div>
            
            <div class="card" id="confirmedCard" style="display:none;">
                <div class="card-header">
                    <h2>Confirmed Rehearsals</h2>
                </div>
                <p class="confirmed-note">Your band has been notified of these times.</p>
                <div id="confirmedList"></div>
                <button class="btn btn-primary" id="shareToGroupBtn" onclick="shareConfirmedDetails()" style="margin-top: 16px;">
                    ðŸ“¤ Share to Group Chat
                </button>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>Band Members</h2>
                    <span class="response-count" id="responseCount">0 responses</span>
                </div>
                <div id="membersList">
                    <p class="empty-state">No responses yet. Share the link with your band!</p>
                </div>
            </div>
            
            <div class="card" id="timeSlotsCard">
                <div class="card-header">
                    <h2>Rehearsal Times</h2>
                    <span class="needed-count" id="neededCount">Need 2</span>
                </div>
                <div class="how-to-confirm" id="howToConfirm">
                    <div class="how-to-step">1. Wait for your band to respond</div>
                    <div class="how-to-step">2. Tap the times that work best</div>
                    <div class="how-to-step">3. Hit "Confirm" to lock them in</div>
                </div>
                <div id="dashboardSlots"></div>
                
                <div id="confirmSection" style="display:none; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.06);">
                    <div class="confirm-summary" id="confirmSummary"></div>
                    <button class="btn btn-confirm" id="confirmBtn" onclick="confirmRehearsals()">Confirm Rehearsals</button>
                </div>
            </div>
            
            <div class="dashboard-actions">
                <button class="btn btn-secondary" onclick="refreshDashboard()">â†» Refresh</button>
                <button class="btn btn-secondary edit-gig-btn" onclick="editGig()"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: -2px; margin-right: 4px;"><path d="M17 3l4 4L7 21H3v-4L17 3z"/></svg>Edit Gig Details</button>
                <button class="btn btn-secondary" onclick="backToShare()"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: -2px; margin-right: 4px;"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/><polyline points="16,6 12,2 8,6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>Share Link</button>
                <button class="btn btn-secondary" onclick="showMySchedule()">My Gigs</button>
                <button class="btn btn-secondary" onclick="showHomeScreen()">Home</button>
            </div>
        </div>
        
        <!-- Screen 8: Edit Gig -->
        <div class="screen" id="screen8">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            <p class="tagline">Edit gig details</p>
            
            <div class="card">
                <h2>Show Details</h2>
                
                <label>Band Name</label>
                <input type="text" id="editBandName" placeholder="Your band name">
                
                <label>Venue</label>
                <input type="text" id="editVenue" placeholder="Where's the show?">
                
                <label>Show Date</label>
                <input type="date" id="editShowDate" min="2024-01-01" max="2099-12-31">
                
                <div class="row">
                    <div>
                        <label>Load-in</label>
                        <input type="time" id="editLoadIn">
                    </div>
                    <div>
                        <label>Set Time</label>
                        <input type="time" id="editSetTime">
                    </div>
                </div>
                
                <label>Set Length</label>
                <select id="editSetLength">
                    <option value="30">30 minutes</option>
                    <option value="45">45 minutes</option>
                    <option value="60">60 minutes</option>
                    <option value="90">90 minutes</option>
                    <option value="120">2+ hours</option>
                </select>
                
                <label>Notes</label>
                <textarea id="editNotes" placeholder="Additional details for the band..."></textarea>
                
                <label>Rehearsal Location</label>
                <input type="text" id="editRehearsalLocation" placeholder="Where will you rehearse?">
            </div>
            
            <div class="card">
                <h2>Setlist</h2>
                
                <div id="editSetlistItems"></div>
                
                <div class="add-song-row">
                    <input type="text" id="editNewSongTitle" placeholder="Song title">
                    <input type="text" id="editNewSongDuration" placeholder="3:45" class="duration-input">
                    <button class="add-song-btn" onclick="addEditSong()">+</button>
                </div>
            </div>
            
            <div class="card">
                <h2>Practice Playlist</h2>
                
                <label>Streaming Link</label>
                <input type="text" id="editStreamingLink" placeholder="https://open.spotify.com/playlist/...">
            </div>
            
            <div class="card">
                <h2>Files</h2>
                
                <div id="editExistingFiles"></div>
                
                <div class="file-upload-area" onclick="document.getElementById('editFileInput').click()">
                    <div class="upload-icon">ðŸ“</div>
                    <div class="upload-text">Tap to add more files</div>
                    <div class="upload-subtext">Images, PDFs, audio files</div>
                </div>
                <input type="file" id="editFileInput" multiple accept="image/*,audio/*,.pdf" style="display:none" onchange="handleEditFileSelect(event)">
            </div>
            
            <button class="btn btn-primary" onclick="saveGigEdits()">Save Changes</button>
            <button class="btn btn-secondary" onclick="cancelEdit()">Cancel</button>
        </div>
        
        <!-- Screen 7: Event Card (shareable finalized view) -->
        <div class="screen" id="screen7">
            <div class="event-card">
                <!-- Show graphic at top -->
                <div class="event-graphic" id="eventGraphicSection" style="display:none;">
                    <img id="eventGraphic" class="event-graphic-img" src="" alt="Show poster">
                </div>
                
                <div class="event-header">
                    <div class="event-band" id="eventBand">Band Name</div>
                    <div class="event-venue" id="eventVenue">Venue</div>
                    <div class="event-date" id="eventDate">Date</div>
                </div>
                
                <div class="event-meta">
                    <div class="event-meta-item">
                        <div class="event-meta-label">Load-in</div>
                        <div class="event-meta-value" id="eventLoadIn">-</div>
                    </div>
                    <div class="event-meta-item">
                        <div class="event-meta-label">Set Time</div>
                        <div class="event-meta-value" id="eventSetTime">-</div>
                    </div>
                    <div class="event-meta-item">
                        <div class="event-meta-label">Set Length</div>
                        <div class="event-meta-value" id="eventSetLength">-</div>
                    </div>
                </div>
                
                <div class="event-section" id="eventRehearsalsSection" style="display:none;">
                    <div class="event-section-title">Confirmed Rehearsals</div>
                    <div class="event-rehearsal-location" id="eventRehearsalLocation" style="display:none;"></div>
                    <div id="eventRehearsals"></div>
                </div>
                
                <div class="event-section" id="eventSetlistSection" style="display:none;">
                    <div class="event-section-title">Setlist</div>
                    <div id="eventSetlist"></div>
                    <a class="event-streaming-link" id="eventStreamingLink" href="#" target="_blank" style="display:none;">
                        <span class="streaming-icon">â–¶</span> Listen to Practice Playlist
                    </a>
                </div>
                
                <div class="event-section" id="eventFilesSection" style="display:none;">
                    <div class="event-section-title">Files</div>
                    <div id="eventFiles"></div>
                </div>
                
                <div class="event-section" id="eventNotesSection" style="display:none;">
                    <div class="event-section-title">Notes</div>
                    <div class="event-notes" id="eventNotes"></div>
                </div>
                
                <div class="event-footer">
                    <div class="event-powered">Organized with Tempo</div>
                </div>
            </div>
            
            <button class="btn btn-secondary" onclick="addToCalendar()">+ Add to Calendar</button>
            <button class="btn btn-secondary" onclick="showMySchedule()">ðŸ“‹ My Gigs</button>
            <button class="btn btn-secondary" onclick="showHomeScreen()">ðŸ  Home</button>
        </div>
    </div>

        <!-- Screen 4: Musician View -->
        <div class="screen" id="screen4">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            
            <div class="gig-header">
                <div class="gig-band" id="musicianBand">Loading...</div>
                <div class="gig-venue" id="musicianVenue"></div>
                <div class="gig-date" id="musicianDate"></div>
                <div class="gig-meta">
                    <div class="gig-meta-item">
                        <div class="gig-meta-label">Load-in</div>
                        <div class="gig-meta-value" id="musicianLoadIn">-</div>
                    </div>
                    <div class="gig-meta-item">
                        <div class="gig-meta-label">Set Time</div>
                        <div class="gig-meta-value" id="musicianSetTime">-</div>
                    </div>
                    <div class="gig-meta-item">
                        <div class="gig-meta-label">Set</div>
                        <div class="gig-meta-value" id="musicianSetLength">-</div>
                    </div>
                </div>
            </div>
            
            <!-- Flyer image if uploaded -->
            <div class="card" id="flyerCard" style="display:none;">
                <img id="flyerImage" class="flyer-image" src="" alt="Show flyer">
            </div>
            
            <!-- Rehearsal location -->
            <div class="card" id="rehearsalLocationCard" style="display:none;">
                <h2>Rehearsal Location</h2>
                <div id="musicianRehearsalLocation" style="font-size: 15px; color: #ccc;"></div>
            </div>
            
            <!-- Files section -->
            <div class="card" id="musicianFilesCard" style="display:none;">
                <h2>Files & Materials</h2>
                <div id="musicianFiles"></div>
                <a class="streaming-link-btn" id="musicianStreamingLink" href="#" target="_blank" style="display:none;">
                    <span class="streaming-icon">â–¶</span> Practice Playlist
                </a>
            </div>
            
            <div class="card" id="notesCard" style="display:none;">
                <h2>Notes</h2>
                <div class="notes-box" id="musicianNotes"></div>
            </div>
            
            <div class="card" id="yourInfoCard">
                <h2>Your Info</h2>
                <label>Your Name</label>
                <input type="text" id="yourName" placeholder="Enter your name">
                
                <label>Instrument</label>
                <select id="yourInstrument">
                    <option value="">Select...</option>
                    <option>Lead Vocals</option>
                    <option>Guitar</option>
                    <option>Bass</option>
                    <option>Drums</option>
                    <option>Keys</option>
                    <option>Saxophone</option>
                    <option>Trumpet</option>
                    <option>Other</option>
                </select>
            </div>
            
            <div class="card">
                <h2>When can you rehearse?</h2>
                <p class="helper-text" id="rehearsalHelper" style="margin-top: 4px; margin-bottom: 18px;">Tap days to select times, or suggest your own</p>
                
                <!-- Calendar View -->
                <div id="calendarView">
                    <div class="calendar-header">
                        <span class="calendar-month" id="calendarMonth">February 2025</span>
                        <div class="calendar-nav">
                            <button onclick="prevMonth()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6"/></svg></button>
                            <button onclick="nextMonth()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,6 15,12 9,18"/></svg></button>
                        </div>
                    </div>
                    
                    <div class="calendar-weekdays">
                        <div class="calendar-weekday">Sun</div>
                        <div class="calendar-weekday">Mon</div>
                        <div class="calendar-weekday">Tue</div>
                        <div class="calendar-weekday">Wed</div>
                        <div class="calendar-weekday">Thu</div>
                        <div class="calendar-weekday">Fri</div>
                        <div class="calendar-weekday">Sat</div>
                    </div>
                    
                    <div class="calendar-days" id="calendarDays">
                        <!-- Days generated dynamically -->
                    </div>
                    
                    <div class="legend">
                        <div class="legend-item"><div class="legend-dot suggested"></div>Suggested</div>
                        <div class="legend-item"><div class="legend-dot popular"></div>Popular</div>
                    </div>
                </div>
                
                <!-- Suggested Times List (always visible below calendar) -->
                <div class="suggested-times-list">
                    <div class="suggested-times-header">Suggested Times</div>
                    <div id="availabilitySlots">
                        <!-- Slots loaded dynamically -->
                    </div>
                </div>
                
                <!-- Suggest New Time Button -->
                <button class="btn-suggest-time" id="suggestTimeBtn" onclick="toggleSuggestNewTime()">
                    ðŸ• Suggest a different time
                </button>
                
                <!-- Custom Time Picker (hidden by default) -->
                <div class="custom-time-picker-panel" id="customTimePicker" style="display:none;">
                    <div class="custom-time-picker-header">
                        <span>Add your own time</span>
                        <span class="custom-time-picker-close" onclick="closeCustomTimePicker()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></span>
                    </div>
                    <div class="custom-time-row-list">
                        <input type="date" id="customDateList" class="custom-date-input" min="2024-01-01" max="2099-12-31">
                        <select id="customTimeStartList">
                            <option value="">Start</option>
                            <option value="09:00">9 AM</option>
                            <option value="10:00">10 AM</option>
                            <option value="11:00">11 AM</option>
                            <option value="12:00">12 PM</option>
                            <option value="13:00">1 PM</option>
                            <option value="14:00">2 PM</option>
                            <option value="15:00">3 PM</option>
                            <option value="16:00">4 PM</option>
                            <option value="17:00">5 PM</option>
                            <option value="18:00">6 PM</option>
                            <option value="19:00">7 PM</option>
                            <option value="20:00">8 PM</option>
                            <option value="21:00">9 PM</option>
                            <option value="22:00">10 PM</option>
                        </select>
                        <span style="color:#555;">to</span>
                        <select id="customTimeEndList">
                            <option value="">End</option>
                            <option value="10:00">10 AM</option>
                            <option value="11:00">11 AM</option>
                            <option value="12:00">12 PM</option>
                            <option value="13:00">1 PM</option>
                            <option value="14:00">2 PM</option>
                            <option value="15:00">3 PM</option>
                            <option value="16:00">4 PM</option>
                            <option value="17:00">5 PM</option>
                            <option value="18:00">6 PM</option>
                            <option value="19:00">7 PM</option>
                            <option value="20:00">8 PM</option>
                            <option value="21:00">9 PM</option>
                            <option value="22:00">10 PM</option>
                            <option value="23:00">11 PM</option>
                        </select>
                    </div>
                    <button class="add-time-btn" onclick="addCustomTimeFromPicker()">Add Time</button>
                </div>
                
                <!-- Selected times summary -->
                <div class="selected-summary" id="selectedSummary" style="display:none;">
                    <div class="selected-summary-header">
                        <span class="selected-summary-title">Your selections</span>
                        <span class="selected-summary-count" id="selectedCount">0 selected</span>
                    </div>
                    <div class="selected-chips" id="selectedChips">
                        <!-- Selected time chips -->
                    </div>
                </div>
            </div>
            
            <div id="musicianStatus"></div>
            
            <button class="btn btn-primary" id="submitBtn" onclick="submitAvailability()">Submit Availability</button>
        </div>
        
        <!-- Screen 5: Musician Success -->
        <div class="screen" id="screen5">
            <div class="logo"><img src="/tempo-logo.svg" alt="Tempo" class="logo-img"></div>
            
            <div class="card success-card">
                <div class="success-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20,6 9,17 4,12"/></svg></div>
                <h1 class="success-title">You're in!</h1>
                <p class="success-subtitle">The band leader will confirm rehearsal times once everyone responds</p>
                
                <div class="response-summary">
                    <div class="summary-row">
                        <span class="summary-label">Name</span>
                        <span class="summary-value" id="summaryName">-</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Instrument</span>
                        <span class="summary-value" id="summaryInstrument">-</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Available</span>
                        <span class="summary-value" id="summaryTimes">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Sign-in prompt for non-logged-in musicians -->
            <div id="signInPromptMusician" class="sign-in-card">
                <p>Sign in to save this gig to your dashboard</p>
                <button class="google-sign-in-btn-small" onclick="signInAndSaveResponse()">
                    <svg width="16" height="16" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                    Sign in with Google
                </button>
            </div>
            
            <div class="card" id="currentStandings">
                <h2>Current Standings</h2>
                <p class="standings-note">Times with the most availability are highlighted. Band leader will confirm final times.</p>
                <div id="standingsList"></div>
            </div>
            
            <button class="btn btn-secondary" onclick="location.reload()">Update my availability</button>
        </div>
    </div>
    

    <!-- Firebase SDK -->
    <script type="module" src="/app-module.js"></script>
    <script src="/app-legacy.js"></script>
</body>
</html>
